<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mini Aladin - Stock Analyzer</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #0d1117; color: #c9d1d9; padding-top: 40px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    .container { max-width: 1000px; }
    h1 { font-weight: bold; color: #58a6ff; }
    label { color: #8b949e; }
    .form-control { background-color: #161b22; color: #fff; border: 1px solid #30363d; }
    .form-control::placeholder { color: #8b949e; }
    .form-control:focus { border-color: #58a6ff; background-color: #161b22; }
    .btn-primary { background-color: #238636; border: none; }
    .btn-primary:hover { background-color: #2ea043; }
    .table { background-color: #161b22; }
    .table thead { background-color: #21262d; color: #58a6ff; }
    .table tbody tr:hover { background-color: #2c313a; }
    .error-message { color: #f85149; font-weight: bold; margin-top: 20px; }
    #loading { color: #ffd33d; font-weight: bold; margin-top: 20px; display: none; }
    .footer { margin-top: 60px; text-align: center; color: #6e7681; font-size: 0.9rem; }
  </style>
</head>
<body>
<div class="container">
  <h1 class="text-center mb-4">âš¡ Mini Aladin - Real-Time Stock Analyzer</h1>
  <form id="stockForm" method="POST" action="/" class="bg-dark p-4 rounded shadow">
    <div class="row g-3">
      <div class="col-md-4">
        <label for="ticker" class="form-label">Ticker Symbol</label>
        <input type="text" id="ticker" name="ticker" class="form-control" placeholder="e.g. TSLA" required>
      </div>
      <div class="col-md-4">
        <label for="start_date" class="form-label">Start Date</label>
        <input type="date" id="start_date" name="start_date" class="form-control" required max="{{ max_date }}">
      </div>
      <div class="col-md-4">
        <label for="end_date" class="form-label">End Date</label>
        <input type="date" id="end_date" name="end_date" class="form-control" required max="{{ max_date }}">
      </div>
    </div>
    <div class="d-grid mt-4">
      <button type="submit" class="btn btn-primary btn-lg">ðŸš€ Analyze</button>
    </div>
  </form>

  <div id="loading" class="text-center">Loading data, please wait...</div>

  {% if error %}
    <div class="error-message text-center">{{ error }}</div>
  {% endif %}

  {% if table %}
    <div class="mt-5">
      <h3 class="text-center text-success">ðŸ“ˆ Analysis Result</h3>
      <div class="table-responsive">
        {{ table|safe }}
      </div>
    </div>
  {% endif %}

  <div class="footer">&copy; 2025 Mini Aladin â€¢ Powered by Flask, YFinance & TA-Lib</div>
</div>
<script>
  const form = document.getElementById('stockForm');
  const loading = document.getElementById('loading');
  form.addEventListener('submit', () => {
    loading.style.display = 'block';
  });
</script>
</body>
</html>
